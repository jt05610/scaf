// Code generated by github.com/jt05610/scaf, DO NOT EDIT.
// Author: {{.Author}}
// Date: {{.Date}}

import { ApolloServer } from '@apollo/server';
import { startStandaloneServer } from '@apollo/server/standalone';
import { ApolloGateway } from "@apollo/gateway";

const gateway: ApolloGateway = new ApolloGateway({
    serviceList: [
        {{- range .Modules }}
            { name: '{{lower .Name}}', url: 'https://localhost:{{.Port}}/query' },
        {{- end }}
    ],
});

const server: ApolloServer = new ApolloServer({
    gateway,
    subscriptions: false,
});

const { url} = await startStandaloneServer(server, {
    listen: {port: {{.GQLPort}}}
});

server.listen().then(({ url }) => {
    console.log(`ğŸš€ Server ready at ${url}`);
});
